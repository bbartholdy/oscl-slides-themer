(function(e){var a=e("#search");if(a.length){var l=a.find('input[type\x3d"search"]'),d=a.find(".options");a.on("submit",function(){return l.val().length?!0:!1});e("\x3cbutton/\x3e").attr("type","button").on("click",function(){a.toggleClass("searching");a.hasClass("searching")&&l.focus()}).addClass("toggle-search").appendTo(a);if(d.length){var c=d.find("a"),m=a.find(".submit"),k=e("\x3cbutton/\x3e").addClass("option").attr("type","button");a.addClass("with-options");k.on("click",function(f){d.toggle();
f.preventDefault()});c.on("click",function(f){var b=e(this),c=b.data("hidden"),g=b.data("hint")||"";k.text(b.text()).focus();a.attr("action",b.attr("href"));l.attr("placeholder",g);a.find(".js").remove();if("object"===typeof c)for(var h in c)e("\x3cinput/\x3e").attr({type:"hidden",name:h,value:c[h],class:"js"}).prependTo(a);d.hide();f.preventDefault()});e(window).on("keydown",function(f){var b=e(document.activeElement),a=38===f.which,g=40===f.which;27===f.which&&d.is(":visible")?d.hide():(b.is(k)&&
g&&(d.is(":hidden")&&d.show(),c.first().focus(),f.preventDefault()),b=c.index(b),(a||g)&&-1!==b&&(g=c.length,b+=a?-1:1,0>b&&(b=g-1),b>=g&&(b=0),c.eq(b).focus(),f.preventDefault()))});e(window).on("click",function(a){a=e(a.target);!a.is(k)&&-1===c.index(a)&&d.is(":visible")&&d.hide()});var h=c.filter(".active");h.length||(h=c.first());h.trigger("click");m.before(k);d.hide()}}})(jQuery);